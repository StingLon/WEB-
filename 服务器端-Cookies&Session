Cookies&Session

会话：访问一个网站,只要不关闭该浏览器，不管该用户点击多少个超链接，访问多少资源，直到用户关闭浏览器，整个这个过程我们称为一次会话.

保存会话数据的两种技术：
Cookie     客户端技术
Sesssion   服务端技术
 
 区别：
 cookie是把用户的数据写给用户的浏览器
 session技术是把用户的数据写到用户独占的seesion中



1.Cookie
流程：浏览器访问服务器，如果服务器需要记录该用户的状态，就使用response向浏览器发送一个Cookie，浏览器会把Cookie保存起来。
当浏览器再次访问服务器的时候，浏览器会把请求的网址连同Cookie一同交给服务器。


常用的Cookie方法：
public Cookie(String name,String value)
setValue与getValue方法
setMaxAge与getMaxAge方法
setPath与getPath方法
setDomain与getDomain方法
getName方法


简单案例：
        //设置response的编码
        response.setContentType("text/html;charset=UTF-8");
        //创建Cookie对象，指定名称和值
        Cookie cookie = new Cookie("username", "zhongfucheng"); 
        //向浏览器给一个Cookie
        response.addCookie(cookie);
        response.getWriter().write("我已经向浏览器发送了一个Cookie");
    
    
没有设置有效期那么浏览器关闭cookie数据消     ，不设置时间不会显示cookie文本
     //设置Cookie的时间
        cookie.setMaxAge(1000);
      
      
 每个cookie的大小限制为4kB
  
Cookie具有不可跨域名性：
浏览器判断一个网站是否能操作另一个网站的Cookie的依据是域名。
所以一般来说，当我访问baidu的时候，浏览器只会把baidu颁发的Cookie带过去，而不会带上google的Cookie。







2.Sesssion
 一个浏览器独占一个session对象
 session由服务器创建，开发人员调用request对象的getsession方法得到session对象
 周期：request.getSession（）时创建session，不管浏览器是否关闭，在三十分钟后自动摧毁session(三十分钟周期可以更改)
     
 session原理：request.getSession()方法创建session，同时生成sessionId,cokkie带sessionId返回浏览器保存，下次浏览器访问时根据id调用对应的seesion
  （所以说sessin是基于cookie）

案例1：用户登录
案例2：防止表单重复提交






（*）四个域对象
session（session域）、servletContext（application域）、request（reqeust域）、pageContext(page域)

request容器：当程序产生数据后如果显示后没有用了就用requst，一次请求
session：产生数据后除了显示等一会要用到则session，一次会话
servletContext:不仅等一会还要给别人用（例如聊天室），整个web应用
pageContext(page域)：当前Jsp页面范围


使用情况：





























